<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="icon" href="styles/assets/icone.png">
    <title>FóssilFácil | Quiz</title>
    <!-- <script src="js/quiz.js"></script> -->
</head>
<body>
    <!-- <div class="navbar">
        <div class="logoFossilFacil">
            <img src="styles/assets/logo.png" alt="logoFossilFacil">
        </div>
        <div class="menuNavbar">
            <a href="index.html">Home</a>
            <span>|</span>
            <a href="sobremim.html">Sobre Mim</a>
            <span>|</span>
            <a href="quiz.html">Quiz</a>
            <span>|</span>
            <a href="login.html">Login</a>
        </div>
    </div> -->

    <div class="mainFormulario">

        <div id="pergunta1" class="quiz">
            <h2>1. Qual desses animais é considerado um descendente direto dos dinossauros?</h2>
            <img src="styles/assets/remember.png" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp1" value="passaro"> Pássaro</label>
                <label><input type="radio" name="resp1" value="elefante"> Elefante</label>
                <label><input type="radio" name="resp1" value="jacare"> Jacaré</label>
                <label><input type="radio" name="resp1" value="camaleao"> Camaleão</label>
            </div>
                
        </div>
    
        <div id="pergunta2" class="quiz">
            <h2>2. O que causou a extinção dos dinossauros, segundo a teoria mais aceita?</h2>
            <img src="styles/assets/extinction.png" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp2" value="tsunami"> Um tsunami global</label>
                <label><input type="radio" name="resp2" value="asteroide"> Queda de um asteroide</label>
                <label><input type="radio" name="resp2" value="doenças"> Doenças misteriosas</label>
                <label><input type="radio" name="resp2" value="eraGlacial"> Uma era glacial repentina</label>
        
            </div>
        </div>

        <div id="pergunta3" class="quiz">
            <h2>3. Qual era geológica é conhecida como a “Era dos Dinossauros”?</h2>
            <img src="styles/assets/eraDinossauros.png" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp3" value="cambriana"> Cambriana</label>
                <label><input type="radio" name="resp3" value="permiana"> Permiana</label>
                <label><input type="radio" name="resp3" value="mesozoica"> Mesozoica</label>
                <label><input type="radio" name="resp3" value="cenozoica"> Cenozoica</label>
        
            </div>
        </div>

        <div id="pergunta4" class="quiz">
            <h2>4. Qual dos seguintes dinossauros era carnívoro?</h2>
            <img src="styles/assets/velociraptor.gif" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp4" value="triceratops"> Triceratops</label>
                <label><input type="radio" name="resp4" value="brachiosaurus"> Brachiosaurus</label>
                <label><input type="radio" name="resp4" value="stegosaurus"> Stegosaurus</label>
                <label><input type="radio" name="resp4" value="velociraptor"> Velociraptor</label>
            </div>
        </div>
    
        <div id="pergunta5" class="quiz">
            <h2>5. Qual o nome desse dinossauro?</h2>
            <img src="styles/assets/carnotossauro.png" alt="imagemPergunta5"> 
            <div class="respostas">
                <label><input type="radio" name="resp5" value="carnotossauro"> Carnotossauro</label>
                <label><input type="radio" name="resp5" value="velociraptor"> Velociraptor</label>
                <label><input type="radio" name="resp5" value="archeopteryx"> Archeopteryx</label>
                <label><input type="radio" name="resp5" value="brachiosaurus"> Brachiosaurus</label>
            </div>
        </div>
    
        <div id="pergunta6" class="quiz">
            <h2>6. Qual é o nome do dinossauro herbívoro com pescoço longo, corpo esguio e cauda muito comprida, que vivia em bandos e era conhecido por seu tamanho impressionante?</h2>
            <img src="styles/assets/pescoco.png" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp6" value="apatossauro"> Apatossauro</label>
                <label><input type="radio" name="resp6" value="triceratops"> Triceratops</label>
                <label><input type="radio" name="resp6" value="estegossauro"> Estegossauro</label>
                <label><input type="radio" name="resp6" value="diplodoco"> Diplodoco</label>
            </div>
        </div>
    
        <div id="pergunta7" class="quiz">
            <h2>7. Em “Jurassic Park”, qual dinossauro escapa primeiro e causa problemas?</h2>
            <img src="styles/assets/eyescene.gif" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp7" value="triceratops"> Triceratops</label>
                <label><input type="radio" name="resp7" value="tiranossauro-rex"> Tiranossauro Rex</label>
                <label><input type="radio" name="resp7" value="velociraptor"> Velociraptor</label>
                <label><input type="radio" name="resp7" value="brachiosaurus"> Brachiosaurus</label>
            </div>
        </div>  

        <div id="pergunta8" class="quiz">
            <h2>8. No filme “Jurassic World”, qual é o nome do dinossauro híbrido criado em laboratório?</h2>
            <img src="styles/assets/laboratorio.png" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp8" value="megaraptor"> Megaraptor</label>
                <label><input type="radio" name="resp8" value="indominus"> Indominus Rex</label>
                <label><input type="radio" name="resp8" value="supersaurus"> SuperSaurus</label>
                <label><input type="radio" name="resp8" value="trex"> T-Rex</label>
            </div>
        </div>

        <div id="pergunta9" class="quiz">
            <h2>9. Qual o nome do dinossauro que aparece nessa cena de “Jurassic Park”?</h2>
            <img src="styles/assets/mosassauro.gif" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp9" value="mosassauro"> Mosassauro</label>
                <label><input type="radio" name="resp9" value="spinosaurus"> Spinosaurus</label>
                <label><input type="radio" name="resp9" value="plesiossauros"> Plesiossauros</label>
                <label><input type="radio" name="resp9" value="diplodoco"> Diplodoco</label>
            </div>
        </div>

        <div id="pergunta10" class="quiz">
            <h2>10. Qual desses dinossauros é atualmente considerado o maior predador carnívoro que já existiu?</h2>
            <img src="styles/assets/doidaoUltimaPergunta.png" alt="imagemPergunta"> 
            <div class="respostas">
                <label><input type="radio" name="resp10" value="trex"> Tiranossauro Rex</label>
                <label><input type="radio" name="resp10" value="giganotossauro"> Giganotossauro</label>
                <label><input type="radio" name="resp10" value="espinossauro"> Espinossauro</label>
                <label><input type="radio" name="resp10" value="carnotauro"> Carnotauro</label>
            </div>
        </div>
    
        <button id="finalizarBtn" onclick="enviarRespostas()">Finalizar quiz</button>

        <div id="resultados" class="resultados quiz" style="display: none;">
            <h2 id="texto-resultado"></h2>
            <div id="erros">
                <img src="styles/assets/resultados.png" alt="imagemResultados">
                <p id="texto-erros"></p>
            </div>
            <button id="dashboardBtn" onclick="console.log(`Dashboard redirecionamento`)">Ver Estatísticas</button>
        </div>
    </div>

</body>
<script>
    // ADICIONANDO FUNÇÂO PRA ENVIAR PRO BANCO
    function enviarRespostas() {
        console.log("Entrou no enviarRespostas")
        const respostasUsuario = {};
        for (let i = 1; i <= 10; i++) {
            const selecionado = document.querySelector(`input[name="resp${i}"]:checked`);
            console.log(selecionado)
            if (selecionado) {
                respostasUsuario[`resp${i}`] = selecionado.value;
            } else {
                alert("Deve responder todas as perguntas!")
                return
            }
        }
        
        const idUsuario = sessionStorage.ID_USUARIO;
        
        fetch("/quiz/salvarResultado", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                idUsuarioServer: idUsuario,
                respostasUsuario: respostasUsuario
            })
        })
        .then(res => res.json())
        .then(res => {
            alert(`Você acertou ${res.acertos} de 10!`);
            console.log(res.acertos)
        });
    }

    function finalizarQuiz() {
    // const resp1 = document.querySelector('input[name="resp1"]:checked');
    // const resp2 = document.querySelector('input[name="resp2"]:checked');
    // const resp3 = document.querySelector('input[name="resp3"]:checked');
    // const resp4 = document.querySelector('input[name="resp4"]:checked');
    // const resp5 = document.querySelector('input[name="resp5"]:checked');
    // const resp6 = document.querySelector('input[name="resp6"]:checked');
    // const resp7 = document.querySelector('input[name="resp7"]:checked');
    // const resp8 = document.querySelector('input[name="resp8"]:checked');
    // const resp9 = document.querySelector('input[name="resp9"]:checked');
    // const resp10 = document.querySelector('input[name="resp10"]:checked'); método burro.
    var pontuacao = 0;
    const dashboardBtn = document.getElementById("dashboardBtn")
    const textoResultado = document.getElementById("texto-resultado")
    const textoErros = document.getElementById("texto-erros")
    let mensagem = ""

    const gabarito = [
        "passaro", 
        "asteroide", 
        "mesozoica", 
        "velociraptor", 
        "carnotossauro", 
        "diplodoco", 
        "tiranossauro-rex", 
        "indominus", 
        "mosassauro", 
        "espinossauro"]

    const respostas = []

    for (let i = 1; i <= 10; i++) { // laço pra verificar se tudo foi respondido, se sim, salva na lista
        const resposta = document.querySelector(`input[name="resp${i}"]:checked`); // passa por cada um dos radio

        if (resposta) { // verifica se foi marcado
            respostas.push(resposta.value); // se tiver marcado, manda a resposta pra lista de respostas do usuario
        } else {
            alert("Não respondeu a questão " + i + ".");
            return;
        }

    }
    
    for (let i = 0; i < 10; i++) { // laço pra fazer a comparação de acertos
        if(respostas[i] === gabarito[i]){ // caso as respostas estejam iguais ao gabarito:
            console.log(`Acertou a questão ${i + 1}`)
            pontuacao+=10
        } else {
            mensagem += `Errou a questão ${i + 1}, a respostas correta era: ${gabarito[i]}<br>`
        }
    }

    textoErros.innerHTML = ""

    // console.log("Respostas:", respostas);
    // console.log("Gabarito:", gabarito);
    // console.log("Pontuação final:", pontuacao);
    // // alert("Você acertou " + pontuacao + " de 10 perguntas!");

    textoResultado.innerHTML = `Sua pontuação final foi: <br> ${pontuacao}/100.`
    textoErros.innerHTML += mensagem
    document.getElementById("resultados").style.display = "inline-flex";

    resultados.scrollIntoView({ behavior: "smooth" });

    // enviarRespostas()
}
</script>
</html>